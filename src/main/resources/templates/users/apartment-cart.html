<!DOCTYPE html>
<html lang="en">

<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head th:replace="~{users/head :: #head}">
</head>
<!-- body -->

<body class="main-layout">
   <!-- loader  -->
   <!-- <div class="loader_bg">
         <div class="loader"><img src="images/loading.gif" alt="#" /></div>
      </div> -->
   <!-- end loader -->
   <!-- header -->
   <header th:replace="~{users/navigation :: #userHeader}"></header>
   <!-- end header inner -->
   <!-- end header -->
   <!-- banner -->
   <div th:replace="~{users/navigation::#userCarousel}"></div>
   <!-- end banner -->
   <!-- form_lebal -->
   <section>
      <div class="container">

      </div>
   </section>
   <!-- end form_lebal -->
   <!-- choose  section -->
   <div class="choose mt-2">
      <div class="container">
         <div class="row">
            <div class="col-md-12 ">
               <div class="row mb-2">
               </div>
               <div class="row mb-2">
               </div>
               <div th:each="ele:${bookingListPage.content}">
                  <div class="row">
                     <div class="col-md-12">
                        <div class="card ml-0 mt-0 mr-0 pl-2 pr-2 pt-2 pb-2 rounded">
                           <div class="row">
                              <div class="col-sm-3">
                                 <img class="d-block t-image-cover-card width-50" src="https://picsum.photos/150?image=641" alt="">
                              </div>
                              <div class="col-sm-9">
                                 <div class="card-block">
                                    <div class="row">
                                       <div class="col-7">
                                          <p class="t-header-card" th:text="${ele.room.roomName}"></p>
                                          <p class="t-header-card-text-red"><span th:text="${ele.room.bedNumbers}"></span> Phòng ngủ </p>
                                          <p class="t-card-text mb-0">Diện tích: <span th:text="${ele.room.area}"></span>m<sup>2</sup></p>
                                          <p class="t-card-text mb-0">Mô tả: <span th:text="${ele.room.roomDescription}"></span></p>
                                          <p class="t-header-card mb-1">Loại phòng: <span th:text="${ele.room.roomType==1?'Cao cấp':'Thường'}"></span></p>
                                          <div class="row">
                                             <div class="col-md-6">
                                                <p>Nhận căn hộ:</p>
                                                <input type="hidden" th:value="${ele.startDate}" name="startDate"/>
                                                <p class="text-primary" th:text="${#temporals.format(ele.startDate,'dd/MM/yyy')}"></p>
                                             </div>
                                             <div class="col-md-6 border-left">
                                                <p>Trả căn hộ:</p>
                                                <input type="hidden" th:value="${ele.endDate}" name="endDate"/>
                                                <p class="text-primary" th:text="${#temporals.format(ele.endDate,'dd/MM/yyyy')}"></p>
                                             </div>
                                          </div>
                                       </div>
                                       <div class="col-5">
                                          <div class="row">
                                             <div class="col-md-12">
                                                <th:block th:if="${ele.totalPriceDiscount== ele.depositPrice}">
                                                   <span> Đã thanh toán tổng:</span>
                                                   <span  th:text="${#numbers.formatDecimal(ele.totalPriceDiscount * totalDate,0,'COMMA',0,'POINT')} "></span>
                                                   <span class="t-header-card-text-red">vnd</span>
                                                </th:block>
                                                <th:block th:if="${ele.totalPriceDiscount > ele.depositPrice}">
                                                   <p class="float-right t-total-price">
                                                      <span> Đã đặt cọc:</span>
                                                      <span  th:text="${#numbers.formatDecimal(ele.depositPrice,0,'COMMA',0,'POINT')} "></span>
                                                      <span class="t-header-card-text-red">vnd</span>
                                                   </p>
                                                </th:block>
                                             </div>
                                          </div>
                                          <div class="row">
                                             <div class="col-md-12">
                                                <p class="t-header-card-text-red mb-0 float-right">Bao gồm thuế, phí</p>
                                             </div>
                                          </div>

                                          <div class="row">
                                             <div class="col-md-12">
                                                <button type="button" class="btn btn-primary btn-sm float-right  mt-2"
                                                        th:onclick="'cancelBooking(' + ${ele.requestId} + ')'" >
                                                   Huỷ phòng
                                                </button>
                                             </div>
                                          </div>
                                          <div class="row">
                                             <div class="col-md-12">
                                                <th:block th:if="${ele.totalPriceDiscount > ele.depositPrice}">
                                                   <button type="button" class="btn btn-primary btn-sm float-right  mt-2"
                                                           th:onclick="'returnBookingRoom(' + ${ele.requestId} + ')'">
                                                      Trả phòng
                                                   </button>
                                                </th:block>
                                             </div>
                                          </div>
                                          <div class="row">
                                             <div class="col-md-12">
                                                <th:block th:if="${ele.totalPriceDiscount > ele.depositPrice}">
                                                   <!-- Button trigger modal -->
                                                   <button type="button" class="btn btn-primary btn-sm float-right  mt-2"
                                                           th:onclick="'rateRoom(' + ${ele.requestId} + ',' + ${ele.user.userId} + ')'">
                                                      Đánh giá
                                                   </button>

                                                </th:block>
                                             </div>
                                          </div>

                                       </div>
                                    </div>
                                 </div>
                              </div>
                           </div>
                        </div>
                     </div>
                  </div>

                  <!-- Modal Rate-->
                  <div class="modal fade" th:id="'modalRate'+${ele.requestId}" tabindex="-1" role="dialog" aria-labelledby="modalRateLabel"
                       aria-hidden="true">
                     <div class="modal-dialog" role="document">
                        <div class="modal-content">
                           <div class="modal-header">
                              <h5 class="modal-title" id="modalRateLabel">Đánh giá căn hộ</h5>
                              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                 <span aria-hidden="true">&times;</span>
                              </button>
                           </div>
                           <div class="modal-body">
                              <div class="container">
                                 <div class="row pl-2">
                                    Mức độ hài lòng của quý khách
                                 </div>
                                 <div class="row">
                                    <div class="rate">
                                       <input type="radio" id="star5" name="rate" value="5" />
                                       <label for="star5" title="text">5 stars</label>
                                       <input type="radio" id="star4" name="rate" value="4" />
                                       <label for="star4" title="text">4 stars</label>
                                       <input type="radio" id="star3" name="rate" value="3" />
                                       <label for="star3" title="text">3 stars</label>
                                       <input type="radio" id="star2" name="rate" value="2" />
                                       <label for="star2" title="text">2 stars</label>
                                       <input type="radio" id="star1" name="rate" value="1" />
                                       <label for="star1" title="text">1 star</label>
                                    </div>
                                 </div>
                                 <div class="row pl-2">
                                    <label>Thêm nhận xét</label>
                                 </div>
                                 <div class="row">
                                    <div class="col-md-12">
                                       <textarea class="form-control" name="userComment" rows="4"></textarea>
                                    </div>
                                 </div>
                              </div>
                           </div>
                           <div class="modal-footer">
                              <button type="button" class="btn btn-secondary" data-dismiss="modal">Đóng</button>
                              <button type="button" class="btn btn-primary">Gửi đánh giá</button>
                           </div>
                        </div>
                     </div>
                  </div>
                   Modal Cancel
                  <div class="modal fade"  th:id="'modalCancel'+${ele.requestId}" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel2"
                       aria-hidden="true">
                     <div class="modal-dialog" role="document">
                        <div class="modal-content">
                           <div class="modal-header">
                              <h5 class="modal-title" id="exampleModalLabel2">Xác nhận huỷ căn hộ</h5>
                              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                 <span aria-hidden="true">&times;</span>
                              </button>
                           </div>
                           <div class="modal-body">
                              <div class="container">
                                 <div class="row pl-2">
                                    Quý Khách có chắc chắn muốn huỷ căn hộ ?
                                 </div>
                                 <div class="row">
                                    <div class="col-md-12">
                                       <label>Ngày thuê</label>
                                       <p class="form-control" th:text="${#temporals.format( ele.startDate,'dd/MM/yyyy')}">
                                    </div>
                                 </div>
                                 <div class="row">
                                    <div class="col-md-12">
                                       <label>Ngày trả</label>
                                       <p class="form-control" th:text="${#temporals.format( ele.endDate,'dd/MM/yyyy')}">
                                    </div>
                                 </div>
                                 <div class="row">
                                    <div class="col-md-12">
                                       <label>Lý do huỷ</label>
                                       <textarea class="form-control" id="exampleFormControlTextarea1" rows="4"></textarea>
                                    </div>

                                 </div>
                              </div>
                           </div>
                           <div class="modal-footer">
                              <button type="button" class="btn btn-secondary" data-dismiss="modal">Đóng</button>
                              <button type="button" class="btn btn-primary">Đồng ý</button>
                           </div>
                        </div>
                     </div>
                  </div>
                  <!-- Modal Cancel-->
                  <div class="modal fade"  th:id="'modalReturn'+${ele.requestId}" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel3"
                       aria-hidden="true">
                     <div class="modal-dialog" role="document">
                        <div class="modal-content">
                           <div class="modal-header">
                              <h5 class="modal-title" id="exampleModalLabel3">Trả phòng thành công!</h5>
                              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                 <span aria-hidden="true">&times;</span>
                              </button>
                           </div>
                           <div class="modal-body">
                              <div class="container">
                                 <div class="row pl-2">
                                    Cảm ơn bạn vì đã chọn chúng tôi. Hy vọng bạn sẽ có trải nghiệm
                                    tuyệt vời khi sử dụng sản phẩm/dịch vụ của chúng tôi. Rất mong
                                    sẽ tiếp tục nhận được sự ủng hộ của bạn trong thời gian tới.
                                 </div>
                                 <div class="row pl-2">
                                    Vui lòng đánh giá  giúp dịch vụ chúng tôi hoàn thiện hơn!.
                                 </div>
                              </div>
                           </div>
                           <div class="modal-footer">
                              <button type="button" class="btn btn-secondary" data-dismiss="modal">Đóng</button>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
         </div>

      </div>
   </div>



   <!-- end testimonial -->
   <div class="container">
      <div class="row">
         <div class="t-boder mb-2"></div>
      </div>
   </div>
   <div class="container">
      <div class="row mt-4">
         <div class="col-xs-9 col-md-9 float-left"></div>
         <div class="col-xs-3 col-md-3 float-left"><button value="Register" class="btn btn-primary btn-block "
               tabindex="7">Thanh toán</button></div>
      </div>
   </div>
   <div class="container mb-4">
      <div class="row">
      </div>
   </div>

   <!--  footer -->
   <footer th:replace="~{users/footer :: #footer}">
   </footer>
   <div th:replace="~{users/js-src :: #mainJs}"></div>
   <!-- sidebar -->
<!--   <script src="js/jquery.mCustomScrollbar.concat.min.js"></script>-->
<!--   <script src="js/custom.js"></script>-->
  <script src="/js/user/apartment-cart.js"></script>
</body>

</html>